<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Products Filtering & UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg-color: #f4f4f5;
        --card-bg: #ffffff;
        --text-color: #020617;
        --muted-text: #6b7280;
        --accent: #2563eb;
        --accent-soft: rgba(37, 99, 235, 0.1);
        --border-color: #e5e7eb;
        --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.08);
        --radius-lg: 1.2rem;
      }

      body.dark-mode {
        --bg-color: #020617;
        --card-bg: #020617;
        --text-color: #e5e7eb;
        --muted-text: #9ca3af;
        --accent: #38bdf8;
        --accent-soft: rgba(56, 189, 248, 0.12);
        --border-color: #1f2937;
        --shadow-soft: 0 12px 30px rgba(0, 0, 0, 0.6);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: background-color 0.25s ease, color 0.25s ease;
      }

      .app {
        max-width: 1100px;
        margin: 0 auto;
        padding: 1.5rem 1rem 2.5rem;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .title-group h1 {
        margin: 0;
        font-size: 1.4rem;
        letter-spacing: 0.02em;
      }

      .title-group p {
        margin: 0.25rem 0 0;
        font-size: 0.85rem;
        color: var(--muted-text);
      }

      .mode-toggle {
        border-radius: 999px;
        padding: 0.45rem 1.1rem;
        border: 1px solid var(--border-color);
        background: var(--card-bg);
        color: var(--text-color);
        font-size: 0.85rem;
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        cursor: pointer;
        box-shadow: var(--shadow-soft);
        transition: background 0.2s ease, transform 0.1s ease,
          box-shadow 0.2s ease, border-color 0.2s ease;
      }

      .mode-toggle span {
        font-size: 0.9rem;
      }

      .mode-toggle:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 30px rgba(15, 23, 42, 0.16);
        border-color: var(--accent);
      }

      .mode-toggle-icon {
        font-size: 1rem;
      }

      .welcome-banner {
        background: var(--accent-soft);
        border-radius: var(--radius-lg);
        padding: 0.8rem 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.75rem;
        margin-bottom: 1.2rem;
        border: 1px solid rgba(148, 163, 184, 0.5);
      }

      .welcome-banner-text {
        font-size: 0.85rem;
        line-height: 1.4;
      }

      .welcome-banner-text strong {
        font-weight: 600;
      }

      .welcome-close-btn {
        border: none;
        background: transparent;
        font-size: 1.1rem;
        cursor: pointer;
        color: var(--muted-text);
        padding: 0.1rem 0.3rem;
        border-radius: 999px;
        line-height: 1;
      }

      .welcome-close-btn:hover {
        background: rgba(148, 163, 184, 0.18);
      }

      .filters-card {
        background: var(--card-bg);
        border-radius: var(--radius-lg);
        padding: 1rem 1rem 1.1rem;
        box-shadow: var(--shadow-soft);
        border: 1px solid var(--border-color);
        margin-bottom: 1.8rem;
      }

      .filters-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 1rem;
        margin-bottom: 0.8rem;
      }

      .filters-header h2 {
        font-size: 1rem;
        margin: 0;
      }

      .filters-header p {
        margin: 0;
        font-size: 0.78rem;
        color: var(--muted-text);
      }

      .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 0.7rem;
        align-items: flex-end;
      }

      .filter-group label {
        display: block;
        font-size: 0.78rem;
        margin-bottom: 0.25rem;
        color: var(--muted-text);
      }

      .filter-input,
      .filter-select {
        width: 100%;
        border-radius: 999px;
        border: 1px solid var(--border-color);
        padding: 0.45rem 0.75rem;
        font-size: 0.85rem;
        background: var(--bg-color);
        color: var(--text-color);
        outline: none;
        transition: border-color 0.2s ease, box-shadow 0.2s ease,
          background 0.2s ease;
      }

      .filter-input:focus,
      .filter-select:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 1px var(--accent-soft);
        background: var(--card-bg);
      }

      .filter-input::placeholder {
        color: #a0aec0;
      }

      .filters-actions {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.5rem;
        margin-top: 0.6rem;
        flex-wrap: wrap;
      }

      .filters-actions-left {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        font-size: 0.8rem;
        color: var(--muted-text);
      }

      .filters-actions-right {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-reset {
        border-radius: 999px;
        padding: 0.35rem 0.9rem;
        font-size: 0.8rem;
        border: none;
        cursor: pointer;
        background: rgba(148, 163, 184, 0.2);
        color: var(--text-color);
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        transition: background 0.15s ease, transform 0.1s ease;
      }

      .btn-reset:hover {
        background: rgba(148, 163, 184, 0.35);
        transform: translateY(-0.5px);
      }

      .view-toggle {
        display: inline-flex;
        border-radius: 999px;
        border: 1px solid var(--border-color);
        overflow: hidden;
        background: var(--card-bg);
      }

      .view-btn {
        border: none;
        padding: 0.25rem 0.7rem;
        font-size: 0.8rem;
        cursor: pointer;
        background: transparent;
        color: var(--text-color);
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        transition: background 0.15s ease, color 0.15s ease;
      }

      .view-btn.is-active {
        background: var(--accent-soft);
        color: var(--accent);
      }

      .products-section-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 1rem;
        margin-bottom: 0.7rem;
      }

      .products-section-header h2 {
        margin: 0;
        font-size: 1rem;
      }

      .products-count {
        margin: 0;
        font-size: 0.8rem;
        color: var(--muted-text);
      }

      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
        gap: 1rem;
      }

      .products-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .product-card {
        background: var(--card-bg);
        border-radius: 1rem;
        border: 1px solid var(--border-color);
        box-shadow: var(--shadow-soft);
        padding: 0.8rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        transition: transform 0.12s ease, box-shadow 0.12s ease,
          border-color 0.12s ease;
      }

      .products-list .product-card {
        flex-direction: row;
        align-items: flex-start;
      }

      .product-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 35px rgba(15, 23, 42, 0.18);
        border-color: var(--accent-soft);
      }

      .product-image-wrapper {
        width: 100%;
        padding: 0.5rem;
        border-radius: 0.9rem;
        background: linear-gradient(
          135deg,
          rgba(148, 163, 184, 0.12),
          rgba(148, 163, 184, 0.03)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 150px;
      }

      .products-list .product-image-wrapper {
        max-width: 140px;
        min-height: 100px;
        flex-shrink: 0;
      }

      .product-image {
        max-height: 140px;
        max-width: 100%;
        object-fit: contain;
      }

      .product-title {
        font-size: 0.9rem;
        margin: 0.2rem 0 0.15rem;
        font-weight: 600;
        line-height: 1.3;
      }

      .product-category {
        font-size: 0.78rem;
        color: var(--muted-text);
        margin: 0;
      }

      .product-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.35rem;
        flex-wrap: wrap;
        margin-top: 0.35rem;
      }

      .product-price {
        font-weight: 600;
        font-size: 0.95rem;
      }

      .product-price span {
        font-size: 0.8rem;
        color: var(--muted-text);
        margin-right: 0.15rem;
      }

      .product-rating-badge {
        font-size: 0.78rem;
        padding: 0.2rem 0.55rem;
        border-radius: 999px;
        background: rgba(234, 179, 8, 0.12);
        border: 1px solid rgba(234, 179, 8, 0.4);
        white-space: nowrap;
      }

      .btn-details {
        border-radius: 999px;
        border: 1px solid var(--border-color);
        padding: 0.25rem 0.7rem;
        font-size: 0.78rem;
        cursor: pointer;
        background: var(--card-bg);
        color: var(--text-color);
        transition: background 0.15s ease, transform 0.1s ease,
          border-color 0.15s ease;
      }

      .btn-details:hover {
        background: var(--accent-soft);
        border-color: var(--accent);
        transform: translateY(-0.5px);
      }

      .product-extra {
        margin-top: 0.4rem;
        font-size: 0.8rem;
        color: var(--muted-text);
        line-height: 1.4;
      }

      .products-list .product-extra {
        margin-top: 0.2rem;
      }

      .product-description {
        margin: 0;
      }

      .empty-state {
        margin-top: 1rem;
        padding: 1rem;
        border-radius: 0.9rem;
        background: rgba(248, 250, 252, 0.1);
        border: 1px dashed var(--border-color);
        font-size: 0.85rem;
        text-align: center;
        color: var(--muted-text);
      }

      .loading {
        margin-top: 1rem;
        text-align: center;
        font-size: 0.9rem;
        color: var(--muted-text);
      }

      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.4rem;
        margin-top: 1.3rem;
        flex-wrap: wrap;
        font-size: 0.85rem;
      }

      .pagination button {
        min-width: 2.1rem;
        height: 2.1rem;
        border-radius: 999px;
        border: 1px solid var(--border-color);
        background: var(--card-bg);
        color: var(--text-color);
        cursor: pointer;
        padding: 0 0.6rem;
        transition: background 0.15s ease, transform 0.1s ease,
          border-color 0.15s ease;
      }

      .pagination button:hover {
        background: var(--accent-soft);
        border-color: var(--accent);
        transform: translateY(-0.5px);
      }

      .pagination button[disabled] {
        opacity: 0.5;
        cursor: default;
        transform: none;
      }

      .pagination .active-page {
        background: var(--accent);
        border-color: var(--accent);
        color: #ffffff;
      }

      @media (max-width: 640px) {
        header {
          flex-direction: column;
          align-items: flex-start;
        }
        .filters-header {
          flex-direction: column;
          align-items: flex-start;
        }
        .mode-toggle {
          align-self: flex-end;
        }
        .products-list .product-card {
          flex-direction: column;
        }
        .products-list .product-image-wrapper {
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <div class="title-group">
          <h1>Products Filtering &amp; UI</h1>
          <p>
            ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„Ø§Ø³Ù…ØŒ ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ… â€“ Ù…Ø¹ Light / Dark
            Mode âœ¨
          </p>
        </div>
        <button id="modeToggle" class="mode-toggle">
          <span class="mode-toggle-icon">ğŸŒ™</span>
          <span id="modeToggleText">Dark Mode</span>
        </button>
      </header>

      <!-- Welcome Message -->
      <div class="welcome-banner" id="welcomeBanner">
        <div class="welcome-banner-text">
          <strong>Welcome!</strong> ğŸ‘‹
          <br />
          Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØµÙØ­Ø© ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª. Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙØ¦Ø©ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø£Ùˆ
          Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù….
        </div>
        <button
          class="welcome-close-btn"
          id="closeWelcomeBtn"
          aria-label="Close"
        >
          Ã—
        </button>
      </div>

      <!-- Filters -->
      <section class="filters-card">
        <div class="filters-header">
          <h2>ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª / Filter Products</h2>
          <p>
            Ø§Ø®ØªØ± Category Ø£Ùˆ Ø­Ø¯Ù‘Ø¯ Ø§Ù„Ø³Ø¹Ø± Ø£Ùˆ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø£Ùˆ Ø§ÙƒØªØ¨ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬.
          </p>
        </div>

        <div class="filters-grid">
          <div class="filter-group">
            <label for="categoryFilter">Ø§Ù„ÙØ¦Ø© (Category)</label>
            <select id="categoryFilter" class="filter-select">
              <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª / All categories</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="minPrice">Ø£Ù‚Ù„ Ø³Ø¹Ø± (Min Price)</label>
            <input
              type="number"
              id="minPrice"
              class="filter-input"
              placeholder="Ù…Ø«Ø§Ù„: 10"
              min="0"
            />
          </div>

          <div class="filter-group">
            <label for="maxPrice">Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø± (Max Price)</label>
            <input
              type="number"
              id="maxPrice"
              class="filter-input"
              placeholder="Ù…Ø«Ø§Ù„: 100"
              min="0"
            />
          </div>

          <div class="filter-group">
            <label for="nameFilter">Ø§Ù„Ø§Ø³Ù… (Name)</label>
            <input
              type="text"
              id="nameFilter"
              class="filter-input"
              placeholder="Ø§ÙƒØªØ¨ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬..."
            />
          </div>

          <!-- Rating Filter -->
          <div class="filter-group">
            <label for="ratingFilter">Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Min Rating)</label>
            <input
              type="number"
              id="ratingFilter"
              class="filter-input"
              placeholder="Ù…Ø«Ø§Ù„: 3.5"
              min="0"
              max="5"
              step="0.1"
            />
          </div>
        </div>

        <div class="filters-actions">
          <div class="filters-actions-left">
            <span>Sort by:</span>
            <select
              id="sortSelect"
              class="filter-select"
              style="max-width: 200px"
            >
              <option value="">Default</option>
              <option value="price-asc">Price: Low â†’ High</option>
              <option value="price-desc">Price: High â†’ Low</option>
              <option value="rating-desc">Rating: High â†’ Low</option>
              <option value="name-asc">Name: A â†’ Z</option>
            </select>

            <div class="view-toggle">
              <button id="gridViewBtn" class="view-btn is-active" type="button">
                ğŸ”³ Grid
              </button>
              <button id="listViewBtn" class="view-btn" type="button">
                â˜° List
              </button>
            </div>
          </div>

          <div class="filters-actions-right">
            <button class="btn-reset" id="resetFiltersBtn">
              ğŸ”„ Reset Filters
            </button>
          </div>
        </div>
      </section>

      <!-- Products -->
      <section>
        <div class="products-section-header">
          <h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª / Products</h2>
          <p class="products-count">
            <span id="productsCount">0</span> Ù…Ù†ØªØ¬ (Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯ Ø§Ù„ÙÙ„ØªØ±Ø©)
          </p>
        </div>

        <div id="loadingMessage" class="loading">Loading products...</div>
        <div id="productsContainer" class="products-grid"></div>
        <div id="emptyState" class="empty-state" hidden>
          Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ÙÙ„ØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©. Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø±ÙˆØ·.
        </div>
        <div id="pagination" class="pagination"></div>
      </section>
    </div>

    <script>
      const API_URL = "https://fakestoreapi.com/products";

      const productsContainer = document.getElementById("productsContainer");
      const loadingMessage = document.getElementById("loadingMessage");
      const emptyState = document.getElementById("emptyState");
      const productsCountEl = document.getElementById("productsCount");
      const paginationContainer = document.getElementById("pagination");

      const categoryFilter = document.getElementById("categoryFilter");
      const minPriceInput = document.getElementById("minPrice");
      const maxPriceInput = document.getElementById("maxPrice");
      const nameFilterInput = document.getElementById("nameFilter");
      const ratingFilterInput = document.getElementById("ratingFilter");
      const sortSelect = document.getElementById("sortSelect");
      const resetFiltersBtn = document.getElementById("resetFiltersBtn");

      const modeToggleBtn = document.getElementById("modeToggle");
      const modeToggleText = document.getElementById("modeToggleText");

      const welcomeBanner = document.getElementById("welcomeBanner");
      const closeWelcomeBtn = document.getElementById("closeWelcomeBtn");

      const gridViewBtn = document.getElementById("gridViewBtn");
      const listViewBtn = document.getElementById("listViewBtn");

      let products = [];
      let filteredProducts = [];
      let currentPage = 1;
      const ITEMS_PER_PAGE = 8;

      // ==== Theme (Light / Dark) ====
      function initTheme() {
        const savedMode = localStorage.getItem("products-ui-theme");
        if (savedMode === "dark") {
          document.body.classList.add("dark-mode");
        }
        updateModeToggleText();
      }

      function updateModeToggleText() {
        const isDark = document.body.classList.contains("dark-mode");
        modeToggleText.textContent = isDark ? "Light Mode" : "Dark Mode";
        modeToggleBtn.querySelector(".mode-toggle-icon").textContent = isDark
          ? "â˜€ï¸"
          : "ğŸŒ™";
      }

      modeToggleBtn.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
        const mode = document.body.classList.contains("dark-mode")
          ? "dark"
          : "light";
        localStorage.setItem("products-ui-theme", mode);
        updateModeToggleText();
      });

      // ==== View Mode (Grid / List) ====
      function setGridView() {
        productsContainer.classList.remove("products-list");
        productsContainer.classList.add("products-grid");
        gridViewBtn.classList.add("is-active");
        listViewBtn.classList.remove("is-active");
        localStorage.setItem("products-ui-view", "grid");
      }

      function setListView() {
        productsContainer.classList.remove("products-grid");
        productsContainer.classList.add("products-list");
        listViewBtn.classList.add("is-active");
        gridViewBtn.classList.remove("is-active");
        localStorage.setItem("products-ui-view", "list");
      }

      function initViewMode() {
        const savedView = localStorage.getItem("products-ui-view");
        if (savedView === "list") {
          setListView();
        } else {
          setGridView();
        }
      }

      gridViewBtn.addEventListener("click", setGridView);
      listViewBtn.addEventListener("click", setListView);

      // ==== Welcome Banner ====
      closeWelcomeBtn.addEventListener("click", () => {
        welcomeBanner.style.display = "none";
      });

      // ==== Fetch Products (Array of Objects) ====
      async function fetchProducts() {
        try {
          const res = await fetch(API_URL);
          const data = await res.json();
          products = data; // Array of objects
          loadingMessage.style.display = "none";

          populateCategoryFilter(products);
          applyFilters(); // Ø£ÙˆÙ„ Ø·Ù„Ø¨
        } catch (error) {
          console.error("Error loading products:", error);
          loadingMessage.textContent = "Failed to load products.";
        }
      }

      // ==== UI Helpers ====
      function populateCategoryFilter(productsArray) {
        const categories = Array.from(
          new Set(productsArray.map((p) => p.category))
        ).sort();

        categories.forEach((cat) => {
          const option = document.createElement("option");
          option.value = cat;
          option.textContent = cat;
          categoryFilter.appendChild(option);
        });
      }

      function renderProducts(productsArray, totalCount) {
        productsContainer.innerHTML = "";

        if (!productsArray.length) {
          emptyState.hidden = false;
          productsCountEl.textContent = totalCount.toString();
          return;
        }

        emptyState.hidden = true;
        productsCountEl.textContent = totalCount.toString();

        productsArray.forEach((product) => {
          const ratingValue = product.rating?.rate ?? 0;
          const ratingCount = product.rating?.count ?? 0;

          const card = document.createElement("article");
          card.className = "product-card";

          const imgWrapper = document.createElement("div");
          imgWrapper.className = "product-image-wrapper";

          const img = document.createElement("img");
          img.className = "product-image";
          img.src = product.image;
          img.alt = product.title;

          imgWrapper.appendChild(img);

          const contentWrapper = document.createElement("div");

          const title = document.createElement("h3");
          title.className = "product-title";
          title.textContent = product.title;

          const category = document.createElement("p");
          category.className = "product-category";
          category.textContent = `Category: ${product.category}`;

          const footer = document.createElement("div");
          footer.className = "product-footer";

          const price = document.createElement("div");
          price.className = "product-price";
          const priceLabel = document.createElement("span");
          priceLabel.textContent = "Price";
          price.appendChild(priceLabel);
          price.appendChild(
            document.createTextNode(` $${product.price.toFixed(2)}`)
          );

          const ratingBadge = document.createElement("div");
          ratingBadge.className = "product-rating-badge";
          ratingBadge.textContent = `â­ ${ratingValue.toFixed(
            1
          )} (${ratingCount})`;

          const detailsBtn = document.createElement("button");
          detailsBtn.className = "btn-details";
          detailsBtn.type = "button";
          detailsBtn.textContent = "Show details";

          footer.appendChild(price);
          footer.appendChild(ratingBadge);
          footer.appendChild(detailsBtn);

          const extra = document.createElement("div");
          extra.className = "product-extra";
          extra.setAttribute("hidden", "");

          const description = document.createElement("p");
          description.className = "product-description";
          description.textContent = product.description;

          extra.appendChild(description);

          detailsBtn.addEventListener("click", () => {
            const isHidden = extra.hasAttribute("hidden");
            if (isHidden) {
              extra.removeAttribute("hidden");
              detailsBtn.textContent = "Hide details";
            } else {
              extra.setAttribute("hidden", "");
              detailsBtn.textContent = "Show details";
            }
          });

          contentWrapper.appendChild(title);
          contentWrapper.appendChild(category);
          contentWrapper.appendChild(footer);
          contentWrapper.appendChild(extra);

          // ÙÙŠ Grid: Ø§Ù„ÙƒØ§Ø±Øª Ø¹Ù…ÙˆØ¯ÙŠØŒ ÙÙŠ List: Ø§Ù„Ù€ CSS Ù‡Ùˆ Ø§Ù„Ù„ÙŠ ÙŠØ±ØªØ¨Ù‡
          card.appendChild(imgWrapper);
          card.appendChild(contentWrapper);

          productsContainer.appendChild(card);
        });
      }

      // ==== Pagination ====
      function renderPagination(totalPages) {
        paginationContainer.innerHTML = "";

        if (totalPages <= 1) return;

        const prevBtn = document.createElement("button");
        prevBtn.textContent = "â€¹ Prev";
        prevBtn.disabled = currentPage === 1;
        prevBtn.addEventListener("click", () => {
          if (currentPage > 1) {
            currentPage--;
            renderCurrentPage();
          }
        });
        paginationContainer.appendChild(prevBtn);

        for (let i = 1; i <= totalPages; i++) {
          const pageBtn = document.createElement("button");
          pageBtn.textContent = i;
          if (i === currentPage) {
            pageBtn.classList.add("active-page");
          }
          pageBtn.addEventListener("click", () => {
            currentPage = i;
            renderCurrentPage();
          });
          paginationContainer.appendChild(pageBtn);
        }

        const nextBtn = document.createElement("button");
        nextBtn.textContent = "Next â€º";
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.addEventListener("click", () => {
          if (currentPage < totalPages) {
            currentPage++;
            renderCurrentPage();
          }
        });
        paginationContainer.appendChild(nextBtn);
      }

      function renderCurrentPage() {
        const totalItems = filteredProducts.length;

        if (totalItems === 0) {
          renderProducts([], 0);
          paginationContainer.innerHTML = "";
          return;
        }

        const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);
        if (currentPage > totalPages) currentPage = totalPages;

        const start = (currentPage - 1) * ITEMS_PER_PAGE;
        const end = start + ITEMS_PER_PAGE;
        const pageItems = filteredProducts.slice(start, end);

        renderProducts(pageItems, totalItems);
        renderPagination(totalPages);
      }

      // ==== Sorting Helper ====
      function sortProducts(arr) {
        const sortValue = sortSelect.value;
        const sorted = [...arr];

        if (sortValue === "price-asc") {
          sorted.sort((a, b) => a.price - b.price);
        } else if (sortValue === "price-desc") {
          sorted.sort((a, b) => b.price - a.price);
        } else if (sortValue === "rating-desc") {
          sorted.sort((a, b) => (b.rating?.rate ?? 0) - (a.rating?.rate ?? 0));
        } else if (sortValue === "name-asc") {
          sorted.sort((a, b) =>
            a.title.localeCompare(b.title, "en", { sensitivity: "base" })
          );
        }
        // Default: no sorting
        return sorted;
      }

      // ==== Filtration Logic ====
      function applyFilters() {
        const categoryValue = categoryFilter.value;
        const minPriceValue = parseFloat(minPriceInput.value) || 0;
        const maxPriceValue =
          parseFloat(maxPriceInput.value) || Number.POSITIVE_INFINITY;
        const nameQuery = nameFilterInput.value.trim().toLowerCase();
        const minRatingValue = parseFloat(ratingFilterInput.value) || 0;

        const filtered = products.filter((product) => {
          const productRating = product.rating?.rate ?? 0;

          const matchesCategory = categoryValue
            ? product.category === categoryValue
            : true;

          const matchesPrice =
            product.price >= minPriceValue && product.price <= maxPriceValue;

          const matchesName = nameQuery
            ? product.title.toLowerCase().includes(nameQuery)
            : true;

          const matchesRating = productRating >= minRatingValue;

          return (
            matchesCategory && matchesPrice && matchesName && matchesRating
          );
        });

        filteredProducts = sortProducts(filtered);
        currentPage = 1; // ÙƒÙ„ Ù…Ø§ Ù†ØºÙŠØ± Ø§Ù„ÙÙ„ØªØ± Ø£Ùˆ Ø§Ù„Ø³ÙˆØ±Øª Ù†Ø±Ø¬Ø¹ Ù„Ø£ÙˆÙ„ ØµÙØ­Ø©
        renderCurrentPage();
      }

      // ==== Event Listeners for Filters & Sorting ====
      categoryFilter.addEventListener("change", applyFilters);
      minPriceInput.addEventListener("input", applyFilters);
      maxPriceInput.addEventListener("input", applyFilters);
      nameFilterInput.addEventListener("input", applyFilters);
      ratingFilterInput.addEventListener("input", applyFilters);
      sortSelect.addEventListener("change", applyFilters);

      resetFiltersBtn.addEventListener("click", () => {
        categoryFilter.value = "";
        minPriceInput.value = "";
        maxPriceInput.value = "";
        nameFilterInput.value = "";
        ratingFilterInput.value = "";
        sortSelect.value = "";
        applyFilters();
      });

      // ==== Init ====
      document.addEventListener("DOMContentLoaded", () => {
        initTheme();
        initViewMode();
        fetchProducts();
      });
    </script>
  </body>
</html>
